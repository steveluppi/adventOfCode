require_relative '../../helpers'
require 'io/console'
require 'set'

class NumPad
  MOVES = {
    'A' => {
      'A' => '',
      '0' => '<',
      '1' => '^<<',
      '2' => '^<',
      '3' => '^',
      '4' => '^^<<',
      '5' => '^^<',
      '6' => '^^',
      '7' => '^^^<<',
      '8' => '^^^<',
      '9' => '^^^',
    },
    '0' => {
      'A' => '>',
      '0' => '',
      '1' => '^<',
      '2' => '^',
      '3' => '^>',
      '4' => '^^<',
      '5' => '^^',
      '6' => '^^>',
      '7' => '^^^<',
      '8' => '^^^',
      '9' => '^^^>',
    },
    '1' => {
      'A' => '>>v',
      '0' => '>v',
      '1' => '',
      '2' => '>',
      '3' => '>>',
      '4' => '^',
      '5' => '^>',
      '6' => '^>>',
      '7' => '^^',
      '8' => '^^>',
      '9' => '^^>>',
    },
    '2' => {
      'A' => 'v>',
      '0' => 'v',
      '1' => '<',
      '2' => '',
      '3' => '>',
      '4' => '^<',
      '5' => '^',
      '6' => '^>',
      '7' => '^^<',
      '8' => '^^',
      '9' => '^^>',
    },
    '3' => {
      'A' => 'v',
      '0' => 'v<',
      '1' => '<<',
      '2' => '<',
      '3' => '',
      '4' => '^<<',
      '5' => '^<',
      '6' => '^',
      '7' => '^^<<',
      '8' => '^^<',
      '9' => '^^',
    },
    '4' => {
      'A' => '>>vv',
      '0' => '>vv',
      '1' => 'v',
      '2' => '>v',
      '3' => '>>v',
      '4' => '',
      '5' => '>',
      '6' => '>>',
      '7' => '^',
      '8' => '^>',
      '9' => '^>>',
    },
    '5' => {
      'A' => 'vv>',
      '0' => 'vv',
      '1' => 'v<',
      '2' => 'v',
      '3' => 'v>',
      '4' => '<',
      '5' => '',
      '6' => '>',
      '7' => '^<',
      '8' => '^',
      '9' => '^>',
    },
    '6' => {
      'A' => 'vv',
      '0' => 'vv<',
      '1' => 'v<<',
      '2' => 'v<',
      '3' => 'v',
      '4' => '<<',
      '5' => '<',
      '6' => '',
      '7' => '^<<',
      '8' => '^<',
      '9' => '^',
    },
    '7' => {
      'A' => '>>vvv',
      '0' => '>vvv',
      '1' => 'vv',
      '2' => 'vv>',
      '3' => 'vv>>',
      '4' => 'v',
      '5' => 'v>',
      '6' => 'v>>',
      '7' => '',
      '8' => '>',
      '9' => '>>',
    },
    '8' => {
      'A' => '>vvv',
      '0' => 'vvv',
      '1' => 'vv<',
      '2' => 'vv',
      '3' => 'vv>',
      '4' => 'v<',
      '5' => 'v',
      '6' => 'v>',
      '7' => '<',
      '8' => '',
      '9' => '>',
    },
    '9' => {
      'A' => 'vvv',
      '0' => 'vvv<',
      '1' => 'vv<<',
      '2' => 'vv<',
      '3' => 'vv',
      '4' => 'v<<',
      '5' => 'v<',
      '6' => 'v',
      '7' => '<<',
      '8' => '<',
      '9' => '',
    },
  }

  def initialize
    @pos = 'A'
  end

  def to(position)
    path = MOVES[@pos][position]
    @pos = position
    return path
  end

  def print_pad
    (7..9).map(&:to_s).each{|l| print @pos == l ? l.red : l}
    puts
    (4..6).map(&:to_s).each{|l| print @pos == l ? l.red : l}
    puts
    (1..3).map(&:to_s).each{|l| print @pos == l ? l.red : l}
    puts
    print ' ' 
    print @pos == '0' ? "0".red : "0"
    print @pos == 'A' ? "A".red : "A"
    puts
    puts
  end
end

class AOC
  def self.silver(lines)
    x = NumPad.new()
    x.print_pad
    entry = "029A"
    full_path = ''
    entry.split('').each do |key|
      path = x.to(key)
      x.print_pad
      full_path << path << 'A'
    end
    p full_path
  end

  def self.gold(lines)
  end
end
